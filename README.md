
## 1. Для начала нужно клонировать  репозиторий.
   `git clone https://github.com/dimbag-alex/greenatom_case_solution`
   
## 2. Установка зависимостей
   `pip install -r requirements.txt`
   
## 3. Настройка и создание базы данных
 PostgreSQL создать базу данных. В проекте используется `DATABASE_URL = "postgresql://postgres:postgres@localhost/greenatom_test"`
  (Имя БД - greenatom_test)

## 4. Заполнение базы данных тестовыми данными
База данных может быть автоматически заполнена данными. Функция `populate_data()` в файле data_generator имитриует создание данных, таких же, как в описании кейса. 
Для заполнения данными нужно расскоментировать строки 16-19 в main.py перед запуском сервера, либо написать `init_db()` в файле `database.py` и выполнить его.
 
## 5. Запуск API-приложения
Для запуска API-приложения используется FastAPI.
Выполните:
`uvicorn main:app --reload`
По умолчанию приложение будет доступно по адресу http://127.0.0.1:8000.

## 6. Проверка работы API
Для того чтобы проверить, что приложение запущено и работает корректно, можно открыть браузер и перейти по следующему URL:
http://127.0.0.1:8000/docs.
Здесь будет доступна документация API, с помощью которой можно тестировать эндпоинты приложения.
Основной эндпоинт - `/distribuition/run`.
При его запуске и осуществляется распределение отходов организаций по хранилищам.

Сам принцип работы программы можно увидеть в test_structure.py. В нем есть полный алгоритм работы программы, но без бд и использования сервера FastApi. 
Создается граф, алгоритм Дейкстры ищет кратчайшее расстояние до хранилища, в которое можно поместить соответсвующий тип отходов и происходит отправка их в него. Так выполняется до тех пор, пока отходы не будут распределены или не кончится свободное место в хранилищах
